# Standalone printer and test page generation
# Rene Garcia 2016

CFLAGS=-DNOT_ULTIMATE
CXXFLAGS=-DNOT_ULTIMATE -O3
LDFLAGS=
CC=gcc
LD=gcc


PRINTER_EXE=printer
PRINTER_SRC=mps_chargen.cc mps_png.cc mps_printer.cc mps_printer_cbm.cc mps_printer_epson.cc mps_printer_ibmpp.cc mps_printer_ibmgp.cc test.cc mps_charset.cc
PRINTER_OBJ=$(PRINTER_SRC:.cc=.o)
PRINTER_LDFLAGS=-lstdc++ -lrt

CBMTEST_EXE=cbmtest
CBMTEST_SRC=cbmtest.c
CBMTEST_OBJ=$(CBMTEST_SRC:.c=.o)
CBMTEST_LDFLAGS=

EPSONTEST_EXE=epsontest
EPSONTEST_SRC=epsontest.c
EPSONTEST_OBJ=$(EPSONTEST_SRC:.c=.o)
EPSONTEST_LDFLAGS=

IBMPPTEST_EXE=ibmpptest
IBMPPTEST_SRC=ibmpptest.c
IBMPPTEST_OBJ=$(IBMPPTEST_SRC:.c=.o)
IBMPPTEST_LDFLAGS=

IBMGPTEST_EXE=ibmgptest
IBMGPTEST_SRC=ibmgptest.c
IBMGPTEST_OBJ=$(IBMGPTEST_SRC:.c=.o)
IBMGPTEST_LDFLAGS=

all: $(PRINTER_EXE) $(CBMTEST_EXE) $(EPSONTEST_EXE) $(IBMPPTEST_EXE) $(IBMGPTEST_EXE)

clean:
	-rm -f $(PRINTER_OBJ) $(PRINTER_EXE)
	-rm -f $(CBMTEST_OBJ) $(CBMTEST_EXE)
	-rm -f $(EPSONTEST_OBJ) $(EPSONTEST_EXE)
	-rm -f $(IBMPPTEST_OBJ) $(IBMPPTEST_EXE)
	-rm -f $(IBMGPTEST_OBJ) $(IBMGPTEST_EXE)

$(PRINTER_EXE): $(PRINTER_OBJ)
	$(LD) $(LDFLAGS) $(PRINTER_LDFLAGS) $(PRINTER_OBJ) -o $(PRINTER_EXE)
	strip $(PRINTER_EXE)

$(CBMTEST_EXE): $(CBMTEST_OBJ)
	$(LD) $(LDFLAGS) $(CBMTEST_LDFLAGS) $(CBMTEST_OBJ) -o $(CBMTEST_EXE)
	strip $(CBMTEST_EXE)

$(EPSONTEST_EXE): $(EPSONTEST_OBJ)
	$(LD) $(LDFLAGS) $(EPSONTEST_LDFLAGS) $(EPSONTEST_OBJ) -o $(EPSONTEST_EXE)
	strip $(EPSONTEST_EXE)

$(IBMPPTEST_EXE): $(IBMPPTEST_OBJ)
	$(LD) $(LDFLAGS) $(IBMPPTEST_LDFLAGS) $(IBMPPTEST_OBJ) -o $(IBMPPTEST_EXE)
	strip $(IBMPPTEST_EXE)

$(IBMGPTEST_EXE): $(IBMGPTEST_OBJ)
	$(LD) $(LDFLAGS) $(IBMGPTEST_LDFLAGS) $(IBMGPTEST_OBJ) -o $(IBMGPTEST_EXE)
	strip $(IBMGPTEST_EXE)
